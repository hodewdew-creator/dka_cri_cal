
<!DOCTYPE html>
<html lang="ko">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8602787823938536"
     crossorigin="anonymous"></script>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Feline DKA Insulin CRI Calculator</title>
  <meta name="description" content="ê³ ì–‘ì´ DKA ì¸ìŠë¦° CRI ê³„ì‚°ê¸° (CRI/Intermittent ì„ íƒ)" />
  <style>
    :root{
      --blue:#1d4ed8; --bg:#f8fafc; --card:#ffffff; --border:#e5e7eb; --ink:#0f172a; --muted:#6b7280; --accent:#69b10d; --highlight:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    header{position:sticky;top:0;background:linear-gradient(180deg,#fff,rgba(255,255,255,.92));backdrop-filter:saturate(1.1) blur(8px);border-bottom:1px solid var(--border);z-index:10}
    .wrap{max-width:880px;margin:0 auto;padding:14px}
    h1{margin:4px 0 6px;font-size:1.22rem;color:var(--blue)}
    .sub{color:var(--muted);font-size:.9rem}

    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px;margin:12px 0}
    .title{font-weight:800;color:var(--blue);margin-bottom:8px;font-size:1.08rem}
    label{font-size:.92rem;color:#111827}
    input[type="number"], input[type="text"], select{width:100%;padding:12px;border:2px solid var(--blue);border-radius:10px;font-size:1rem;background:#fff}
    .grid{display:grid;gap:10px}
    .cols-2{grid-template-columns:1fr 1fr}
    .cols-3{grid-template-columns:1fr 1fr 1fr}
    @media (max-width:720px){
      .cols-2,.cols-3{grid-template-columns:1fr}
      .compact-2{grid-template-columns:minmax(120px,1fr) minmax(120px,1fr)!important}
    }
    .compact-2{grid-template-columns:minmax(160px,1fr) minmax(160px,1fr); justify-content:flex-start}
    .compact-2>div{max-width:240px}

    .kpi{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .kpi .box{background:#f8fafc;border:1px solid var(--border);border-radius:10px;padding:10px}
    .kpi .label{font-size:.86rem;color:var(--muted)}
    .kpi .val{font-size:1.1rem;font-weight:800;color:var(--highlight)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

    .note{font-size:.9rem;color:var(--muted)}
    .note strong{color:var(--blue);font-weight:700}
    .hr{border-top:1px dashed var(--border);margin:10px 0}

    table{width:100%;border-collapse:collapse}
    th,td{border:1px solid var(--border);padding:8px 10px;font-size:.92rem;text-align:center}
    th{background:#f1f5f9}
    .hl{background:#fef9c3}

    .ok{background:#f0fdf4;border:1px solid #bbf7d0;color:#14532d;border-radius:10px;padding:8px 10px}

    .tabs{display:flex;gap:8px;margin-bottom:10px}
    .tab{flex:1;padding:10px;border:1px solid var(--border);border-radius:8px;background:#fff;cursor:pointer;text-align:center;font-weight:600;user-select:none}
    .tab.active{background:var(--blue);color:#fff;border-color:var(--blue)}

    /* Accents & Mini Card */
    .chip{margin-left:6px;background:#eef2ff;color:#1d4ed8;border:1px solid #c7d2fe;padding:2px 6px;border-radius:9999px;font-size:.72rem;font-weight:700}
    .mini-card{background:#eef2ff;border:1px dashed var(--blue);border-radius:12px;padding:12px;margin-top:10px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>ğŸˆâ€â¬› Feline DKA Insulin Calculator</h1>
      <div class="sub">(íƒˆìˆ˜í™˜ë¬˜ëŠ” CRI ì‹œì‘ ì „ ìµœì†Œ 2~4ì‹œê°„ì— ê±¸ì³ ê²°í•ëŸ‰ì˜ ì•½ 50%ë¥¼ ë¨¼ì € êµì •í•˜ì„¸ìš”.)</div>
    </div>
  </header>

  <main class="wrap">
    <!-- 1) ê¸°ë³¸ ì…ë ¥ -->
    <section class="card">
      <div class="title">1) ê¸°ë³¸ ì…ë ¥</div>
      <div class="grid cols-2 compact-2">
        <div>
          <label for="bw">ì²´ì¤‘ (kg)</label>
          <input id="bw" type="number" inputmode="decimal" step="0.01" min="0" placeholder="*í•„ìˆ˜ì…ë ¥" />
        </div>
        <div>
          <label for="name">ì´ë¦„ (ì„ íƒ)</label>
          <input id="name" type="text" placeholder="ì„ íƒ ì…ë ¥" />
        </div>
      </div>
    </section>

    <!-- 2) ì¸ìŠë¦° íˆ¬ì—¬ ë°©ì‹ ì„ íƒ -->
    <section class="card">
      <div class="title">2) ì¸ìŠë¦° íˆ¬ì—¬ ë°©ì‹ ì„ íƒ</div>
      <div class="tabs" role="tablist" aria-label="íˆ¬ì—¬ ë°©ì‹ ì„ íƒ">
        <div class="tab active" data-tab="cri" role="tab" aria-selected="true">CRI ë°©ì‹ (1.1 iu/kg)</div>
        <div class="tab" data-tab="cri2" role="tab" aria-selected="false">CRI ë°©ì‹ (2.2 iu/kg)</div>
        <div class="tab" data-tab="intermittent" role="tab" aria-selected="false">Intermittent injection</div>
      </div>

      <!-- CRI ê³„ì‚°ê¸° (1.1) -->
      <div id="cri" class="calc-section" role="tabpanel">
        <div>
          <label for="bagVol">ë°± ìš©ëŸ‰ (mL) <span class="chip">ì…ë ¥</span></label>
          <input id="bagVol" type="number" step="1" value="250" />
          <div class="note"><strong>ì‹œì‘ ì†ë„ :</strong> 10 mL/h (ê³ ì •) </div>
          <div class="note"><strong>ì‹œì‘ íˆ¬ì—¬ëŸ‰ :</strong> 0.044 U/kg/h (ê³ ì •) </div>
        </div>
        <div class="hr"></div>
        <div class="kpi">
          <div class="box"><div class="label">ë°±ì— ë„£ì„ ì¸ìŠë¦°</div><div class="val"><span id="bagUnits" class="mono">-</span> U</div></div>
          <div class="box"><div class="label">ì™„ì„±ëœ CRIìš©ì•¡ ë†ë„</div><div class="val"><span id="bagConc" class="mono">-</span> U/mL</div></div>
        </div>
        <!-- 1.1 ì„¤ëª… ë…¸íŠ¸ (ìš”ì²­í•˜ì‹  ë„¤ ì¤„ ë³µì›) -->
        <div class="note" style="margin-top:6px">
          <br>â€¢ ë°±ìš©ëŸ‰ì€ ê¸°ë³¸ 250 mLì´ë©°, ì‚¬ìš©ìê°€ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.
          <br><br>â€¢ ì‹œì‘ì†ë„ëŠ” 10 mL/h, ì‹œì‘íˆ¬ì—¬ëŸ‰ì€ 0.044 U/kg/h (1.1 ê¸°ì¤€)ë¡œ ê³ ì •ì…ë‹ˆë‹¤.
          (ë°±ìš©ëŸ‰ì„ 2ë°°ë¡œ ë³€ê²½í•˜ë©´, ë°±ì— ë„£ì„ ì¸ìŠë¦°(U)ë„ 2ë°°ë¡œ ìë™ ì¦ê°€í•˜ì—¬ ë†ë„ì™€ U/kg/hëŠ” ë™ì¼í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.)
          <br><br>â€¢ ê¶Œì¥ ì¡°ì œ: 0.9% NaCl 250 mL ê¸°ì¤€ Regular insulin 1.1 Ã— kg U.
          <br><br>â€¢ ì¡°ì œ í›„ ë¼ì¸ í¡ì°© ë³´ì •ì„ ìœ„í•´ 50 mL ëŠ” ë°˜ë“œì‹œ í˜ë ¤ì„œ íê¸°í•´ì£¼ì„¸ìš”.<br>
        </div>
        <!-- ë³€í™˜ ê³„ì‚°ê¸° -->
        <div class="mini-card" id="conv11">
          <div style="font-weight:700;margin-bottom:6px">ğŸ”„ ë³€í™˜ ê³„ì‚°ê¸°</div>
          <div class="grid cols-2">
            <div>
              <label>ë³€í™˜: mL/h â†’ U/kg/h</label>
              <input id="rateMl1" type="number" step="0.1" placeholder="mL/h ì…ë ¥" />
            </div>
            <div>
              <label>ë³€í™˜: U/kg/h â†’ mL/h</label>
              <input id="rateUkgh1" type="number" step="0.001" placeholder="U/kg/h ì…ë ¥" />
            </div>
          </div>
        </div>
      </div>

      <!-- CRI ê³„ì‚°ê¸° (2.2) -->
      <div id="cri2" class="calc-section" role="tabpanel" style="display:none">
        <div>
          <label for="bagVol2">ë°± ìš©ëŸ‰ (mL) <span class="chip">ì…ë ¥</span></label>
          <input id="bagVol2" type="number" step="1" value="250" />
          <div class="note"><strong>ì‹œì‘ ì†ë„ :</strong> 10 mL/h (ê³ ì •) </div>
          <div class="note"><strong>ì‹œì‘ íˆ¬ì—¬ëŸ‰ :</strong> 0.088 U/kg/h (ê³ ì •) </div>
        </div>
        <div class="hr"></div>
        <div class="kpi">
          <div class="box"><div class="label">ë°±ì— ë„£ì„ ì¸ìŠë¦°</div><div class="val"><span id="bagUnits2" class="mono">-</span> U</div></div>
          <div class="box"><div class="label">ìš©ì•¡ ë†ë„</div><div class="val"><span id="bagConc2" class="mono">-</span> U/mL</div></div>
        </div>
        <!-- 2.2 ì„¤ëª… ë…¸íŠ¸ (ëŒ€ì‘ ë‚´ìš©) -->
        <div class="note" style="margin-top:6px">
          <br>â€¢ ë°±ìš©ëŸ‰ì€ ê¸°ë³¸ 250 mLì´ë©°, ì‚¬ìš©ìê°€ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.
          <br><br>â€¢ ì‹œì‘ì†ë„ëŠ” 10 mL/h, ì‹œì‘íˆ¬ì—¬ëŸ‰ì€ 0.088 U/kg/h (2.2 ê¸°ì¤€)ë¡œ ê³ ì •ì…ë‹ˆë‹¤.
          (ë°±ìš©ëŸ‰ì„ 2ë°°ë¡œ ë³€ê²½í•˜ë©´, ë°±ì— ë„£ì„ ì¸ìŠë¦°(U)ë„ 2ë°°ë¡œ ìë™ ì¦ê°€í•˜ì—¬ ë†ë„ì™€ U/kg/hëŠ” ë™ì¼í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.)
          <br><br>â€¢ ê¶Œì¥ ì¡°ì œ: 0.9% NaCl 250 mL ê¸°ì¤€ Regular insulin 1.1 Ã— kg U.
          <br><br>â€¢ ì¡°ì œ í›„ ë¼ì¸ í¡ì°© ë³´ì •ì„ ìœ„í•´ 50 mL ëŠ” ë°˜ë“œì‹œ í˜ë ¤ì„œ íê¸°í•´ì£¼ì„¸ìš”.<br>
        </div>
        <!-- ë³€í™˜ ê³„ì‚°ê¸° -->
        <div class="mini-card" id="conv22">
          <div style="font-weight:700;margin-bottom:6px">ğŸ”„ ë³€í™˜ ê³„ì‚°ê¸°</div>
          <div class="grid cols-2">
            <div>
              <label>ë³€í™˜: mL/h â†’ U/kg/h</label>
              <input id="rateMl2" type="number" step="0.1" placeholder="mL/h ì…ë ¥" />
            </div>
            <div>
              <label>ë³€í™˜: U/kg/h â†’ mL/h</label>
              <input id="rateUkgh2" type="number" step="0.001" placeholder="U/kg/h ì…ë ¥" />
            </div>
          </div>
        </div>
      </div>

      <!-- Intermittent ì•ˆë‚´ -->
      <div id="intermittent" class="calc-section" role="tabpanel" style="display:none">
        <h3 style="margin:6px 0;color:var(--blue)">Intermittent injection</h3>
        <p class="note">1) 0.2 U/kg IV/IM initial<br>
        2) ì´í›„ 0.1 U/kg IV/IM q1h (BG â‰¥14 mmol/L)<br>
        3) BG &lt;14 mmol/L ì‹œ: 0.1â€“0.3 U/kg q4â€“6h</p>
      </div>
    </section>

    <!-- 3) BG based CRI ì†ë„ì„¤ì • -->
    <section class="card">
      <div class="title" style="display:flex;justify-content:space-between;align-items:center">
        <span>3) BG ê¸°ë°˜ íŒíŠ¸ / ì†ë„í‘œ</span>
        <label class="toggle" style="display:flex;align-items:center;gap:6px">
          <input id="showTable" type="checkbox" checked>
          <span class="note">í‘œ ë³´ì´ê¸°</span>
        </label>
      </div>
      <div id="bgAdvice" class="ok" style="display:none;margin-bottom:8px"></div>
      <div id="bgTableWrap">
        <table>
          <thead><tr><th>Blood glucose (mg/dL)</th><th>Insulin CRI rate</th><th>Dextrose (conc)</th></tr></thead>
          <tbody>
            <tr><td>&gt;350</td><td>10 mL/h</td><td>0%</td></tr>
            <tr><td>250â€“350</td><td>7 mL/h</td><td>0%</td></tr>
            <tr><td>200â€“250</td><td>5 mL/h</td><td>0%</td></tr>
            <tr><td>150â€“200</td><td>3 mL/h</td><td>0%</td></tr>
            <tr class="hl"><td>100â€“150</td><td>1 mL/h</td><td>2.5%</td></tr>
            <tr class="hl"><td>&lt;100</td><td>Stop</td><td>5%</td></tr>
          </tbody>
        </table>
        <div class="note" style="margin-top:6px">ë…¸ë€ ì¹¸: í™˜ì alert & ìë°œ ì‹ì‚¬ ê°€ëŠ¥ â†’ CRI ì¤‘ë‹¨ ê³ ë ¤.</div>
      </div>
      <div class="note" style="margin-top:8px">ëª©í‘œ BG 150~250 mg/dL, ì‹œê°„ë‹¹ í•˜ë½í­ 50~100 mg/dL ì´ë‚´. í•„ìš”ì‹œ 2.5~5% í¬ë„ë‹¹ ë³‘ìš©.</div>
    </section>

    <!-- 4) ì „í•´ì§ˆ ë³´ì • -->
    <section class="card">
      <div class="title">4) ì „í•´ì§ˆ ë³´ì • (Kâº)</div>
      <table>
        <thead><tr><th>Serum Kâº (mmol/L)</th><th>KCl (mmol/L, 0.9% NaClì— ì¶”ê°€)</th></tr></thead>
        <tbody>
          <tr><td>&lt;2.0</td><td>80 mmol</td></tr>
          <tr><td>2.0â€“2.5</td><td>60 mmol</td></tr>
          <tr><td>2.5â€“3.0</td><td>40 mmol</td></tr>
          <tr><td>3.0â€“3.5</td><td>30 mmol</td></tr>
        </tbody>
      </table>
      <div class="note" style="margin-top:6px">K ë³´ì¶© ì†ë„ â‰¤ 0.5 mmol/kg/h. P, Mg ë³´ì • ë³‘í–‰.</div>
    </section>

    <!-- 5) ë©”ëª¨ -->
    <section class="card">
      <div class="title">ë©”ëª¨</div>
      <ul class="note" style="margin:8px 0 0 18px">
        <li>CRI ì†ë„ëŠ” ì ˆëŒ€ ê¸°ì¤€ì´ ì•„ë‹Œ ê°€ì´ë“œë¼ì¸ìœ¼ë¡œ í™˜ì ìƒíƒœì— ë§ì¶° ì¡°ì ˆí•´ì£¼ì„¸ìš”.</li>
        <li>ì¸ìŠë¦° CRI ìš©ì•¡ì€ 24ì‹œê°„ë§ˆë‹¤ ìƒˆë¡œ ì¡°ì œ/êµì²´í•´ì£¼ì„¸ìš”.</li>
       </ul>
    </section>
  </main>

  <script>
    const $ = id => document.getElementById(id);
    const num = v => { const x = parseFloat(v); return isNaN(x) ? NaN : x; };
    const fmt = (x, d=3) => (isFinite(x) ? x.toFixed(d) : '-');

    // Tabs
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        const key = tab.dataset.tab;
        document.querySelectorAll('.calc-section').forEach(sec => sec.style.display = 'none');
        document.getElementById(key).style.display = 'block';
      });
    });

    // Elements (shared)
    const bw = $('bw');

    // (1.1)
    const bagVol = $('bagVol');
    const bagUnits = $('bagUnits');
    const bagConc = $('bagConc');

    // (2.2)
    const bagVol2 = $('bagVol2');
    const bagUnits2 = $('bagUnits2');
    const bagConc2 = $('bagConc2');
    const usableVol2 = $('usableVol2');

    // Converters
    const rateMl1 = $('rateMl1');
    const rateUkgh1 = $('rateUkgh1');
    const rateMl2 = $('rateMl2');
    const rateUkgh2 = $('rateUkgh2');

    function calcCRI(which){
      const w = num(bw.value);
      const V = num(which===1 ? bagVol.value : bagVol2.value);
      if(!(w>0) || !(V>0)){
        (which===1 ? bagUnits : bagUnits2).textContent = '-';
        (which===1 ? bagConc  : bagConc2 ).textContent = '-';
        if(which===2 && usableVol2) usableVol2.textContent = '-';
        return;
      }
      const factor = (which===1 ? 1.1 : 2.2);
      const units = factor * w * (V/250);
      const conc  = units / V;
      (which===1 ? bagUnits : bagUnits2).textContent = fmt(units, 2);
      (which===1 ? bagConc  : bagConc2 ).textContent = fmt(conc, 4);
      if(which===2 && usableVol2){ const waste=50; usableVol2.textContent = Math.max(V-waste,0).toFixed(0); }
      // live conversions
      if(which===1){ if(rateMl1 && rateMl1.value) convMlToUkgh(1); if(rateUkgh1 && rateUkgh1.value) convUkghToMl(1); }
      else { if(rateMl2 && rateMl2.value) convMlToUkgh(2); if(rateUkgh2 && rateUkgh2.value) convUkghToMl(2); }
    }

    function currentConc(which){ return num(which===1 ? bagConc.textContent : bagConc2.textContent); }

    function convMlToUkgh(which){
      const w = num(bw.value), conc = currentConc(which);
      const input = which===1 ? rateMl1 : rateMl2;
      const out   = which===1 ? rateUkgh1 : rateUkgh2;
      const mlh = num(input.value);
      if(!(w>0) || !(conc>0) || !(mlh>=0)){ out.value=''; return; }
      const ukgh = (mlh * conc) / w;
      out.value = ukgh.toFixed(3);
    }
    function convUkghToMl(which){
      const w = num(bw.value), conc = currentConc(which);
      const input = which===1 ? rateUkgh1 : rateUkgh2;
      const out   = which===1 ? rateMl1   : rateMl2;
      const ukgh = num(input.value);
      if(!(w>0) || !(conc>0) || !(ukgh>=0)){ out.value=''; return; }
      const mlh = (ukgh * w) / conc;
      out.value = mlh.toFixed(1);
    }

    // Events
    if(bw) bw.addEventListener('input', ()=>{ calcCRI(1); calcCRI(2); });
    if(bagVol) bagVol.addEventListener('input', ()=>calcCRI(1));
    if(bagVol2) bagVol2.addEventListener('input', ()=>calcCRI(2));

    if(rateMl1) rateMl1.addEventListener('input', ()=>convMlToUkgh(1));
    if(rateUkgh1) rateUkgh1.addEventListener('input', ()=>convUkghToMl(1));
    if(rateMl2) rateMl2.addEventListener('input', ()=>convMlToUkgh(2));
    if(rateUkgh2) rateUkgh2.addEventListener('input', ()=>convUkghToMl(2));

    // BG table toggle
    const showTable = $('showTable');
    const bgTableWrap = document.getElementById('bgTableWrap');
    if(showTable && bgTableWrap){
      showTable.addEventListener('change', ()=>{
        bgTableWrap.style.display = showTable.checked ? 'block' : 'none';
      });
    }

    // Init
    calcCRI(1); calcCRI(2);
  </script>
</body>
</html>
